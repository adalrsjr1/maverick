version: '3'
services:
    adaptation:
    image: adalrsjr1/executor
    volumes:
      - data-volume:/home/app/src/main/resources/logs
    depends_on:
      - fluentd
      - rabbitmq
      - planner
    entrypoint:
      - java
      - jar
      - maverick-executor-0.0.1-SNAPSHOT.jar
      - --spring.rabbitmq.host=rabbitmq
      - --executor.actions.repository=src/main/resources/actions
      - -Xms=64m
      - -Xmx128m
      - -XX:PermSize=32m
      - -XX:MaxPermSize=64m
      - -Djava.security.egd=file:/dev/urandom # performance workaround
  planner:
    image: adalrsjr1/planner-file
    volumes:
      - data-volume:/home/app/src/main/resources/logs
    depends_on:
      - fluentd
      - rabbitmq
      - analyzer
    entrypoint:
      - java
      - jar
      - maverick-planner-file-0.0.1-SNAPSHOT.jar
      - --spring.rabbitmq.host=rabbitmq
      - ----
      - -Xms=64m
      - -Xmx=128m
      - -XX:PermSize=32m
      - -XX:MaxPermSize=64m
      - -Djava.security.egd=file:/dev/urandom
